# We typically would migrate node fields along with node data. 
# However, since some of those fields contain links to *other* nodes,
# We want to create the nodes first, then the fields in this subsequent migration
# so that those references can be mapped.

# Migration metadata
id: utexas_flex_page_fields
label: Flex Page (Fields)
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags:
  - 'Drupal 7'
migration_group: utexas

source:
  plugin: flex_page_fields_source

process:
  # Retrieve the destination ID of the corresponding node.
  #
  # Since this field will just be used for computing another property, 
  # prefix it with "temp_".
  temp_nid:
    plugin: migration_lookup
    source: nid
    migration:
      - utexas_standard_page
      - utexas_landing_page

destination:
  plugin: flex_page_fields_destination

migration_dependencies:
  required:
      - utexas_standard_page
      - utexas_landing_page